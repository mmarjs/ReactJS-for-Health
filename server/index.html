<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>Viven Health</title>
	    <link rel="shortcut icon" href="/images/logo.png" type="image/x-icon" />

        <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/1.0.0/firebaseui.css" />
        <link type="text/css" rel="stylesheet" href="/src/css/style.css" />

        <script src="https://cdn.firebase.com/libs/firebaseui/1.0.0/firebaseui.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.6.8/firebase.js"></script>

        <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyDZ_fkS8XTkcH4mFAB5bGwnyGRxY_qPxMo",
            authDomain: "viven-health-7f33c.firebaseapp.com",
            databaseURL: "https://viven-health-7f33c.firebaseio.com",
            storageBucket: "viven-health-7f33c.appspot.com",
            messagingSenderId: "129257487284"
        };
        firebase.initializeApp(config);
        </script>

        <script type="text/javascript">
        function initApp() {
            firebase.auth().onAuthStateChanged( function(user){
                if (user) {
                    localStorage.setItem('currentAccount', JSON.stringify(user));
                    user.getToken(true).then(function(idToken) {
                        document.cookie = "idToken=" + idToken;
                        window.location.href = "/"
                    }).catch(function(error) {
                        // Handle error
                    });
                } else {
                    // Handle error
                }
            }, function(error) {
                console.log(error);
            });
        }

        window.onload = function() {
            initApp();
        };
        </script>

        <script type="text/javascript">
        // FirebaseUI config.
        var uiConfig = {
            signInSuccessUrl: '/login',
            signInOptions: [
            // Leave the lines as is for the providers you want to offer your users.
            firebase.auth.EmailAuthProvider.PROVIDER_ID,
            firebase.auth.GoogleAuthProvider.PROVIDER_ID,
            firebase.auth.FacebookAuthProvider.PROVIDER_ID,
            //   firebase.auth.TwitterAuthProvider.PROVIDER_ID,
            //   firebase.auth.GithubAuthProvider.PROVIDER_ID,
            ],
            // Terms of service url.
            tosUrl: 'https://www.google.com'
        };

        // Initialize the FirebaseUI Widget using Firebase.
        var ui = new firebaseui.auth.AuthUI(firebase.auth());
        // The start method will wait until the DOM is loaded.
        ui.start('#SocialWidgetDiv', uiConfig);
        </script>

    </head>

    <body style="background: radial-gradient(#84B5CA, #2D6780);">
        <!--Google Font - Work Sans-->
        <link href='https://fonts.googleapis.com/css?family=Work+Sans:400,300,700' rel='stylesheet' type='text/css'>
        <!--<link rel="import" href="https://www.polymer-project.org/0.5/components/paper-ripple/paper-ripple.html">-->

        <div class="container">
            <div class="profile">
                <img src="/images/logo_new.png" alt="Avatar" style="width:200px; height: 100px; margin-bottom: 50px; margin-left: 100px"/>
                <div id="SocialWidgetDiv" style="margin-bottom: 150px"></div>
            </div>
        </div>

        <!--<script type="text/javascript" src="js/index.js"></script>-->
    </body>
</html>